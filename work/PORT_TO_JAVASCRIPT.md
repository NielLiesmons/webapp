# Port Zapstore Webapp from TypeScript to JavaScript

**Status:** Not started. Do when it makes sense; not urgent.

## Scope

- Remove TypeScript from the project; use plain JavaScript everywhere.
- Keep Svelte (`.svelte` files); change `lang="ts"` to `lang="js"` or omit (default is JS).
- Convert all `.ts` files to `.js` (or `.mjs` if needed for ESM).

## Steps

1. **Rename and strip types**
   - `src/**/*.ts` → `src/**/*.js` (or keep `.ts` and change content to valid JS only—tooling may still accept it; cleaner to rename).
   - Remove type annotations, `interface`/`type` definitions, `as` casts, `: Type` on params/returns, generics.
   - Replace with JSDoc `@param`/`@returns` where documentation is useful.
   - In `.svelte` files: set `lang="js"` (or remove `lang="ts"`); remove types from `<script>`.

2. **Config and tooling**
   - **svelte.config.js** — already JS; no change unless it imports TS.
   - **vite.config.ts** → `vite.config.js`; strip types.
   - **tsconfig.json** — remove or replace with a minimal `jsconfig.json` if the editor needs it (e.g. path aliases).
   - **package.json** — remove `typescript`, `svelte-check` (or run it in JS mode if it supports). Update `check` script to not depend on TS (e.g. eslint only, or remove).
   - **@types/*** — remove all `@types/` devDependencies.

3. **SvelteKit**
   - SvelteKit works with JS: `+page.js`, `+page.server.js`, `+layout.js`, etc. Rename `+page.ts` → `+page.js`, `+page.server.ts` → `+page.server.js`, and so on for all route modules.
   - `$types` (e.g. `./$types`) are generated by SvelteKit for TS; after porting, remove `import type { X } from './$types'` and use plain objects/params.

4. **Service worker**
   - `src/service-worker.ts` → `src/service-worker.js` (or keep extension if Vite/SvelteKit allow; ensure it’s built as a worker).

5. **Linting**
   - ESLint config: if it uses TS-specific rules or parser, switch to plain JS parser. Remove `@typescript-eslint/*` if present.

6. **Verification**
   - `bun run build` (or equivalent) must succeed.
   - `bun run dev` and smoke-test main flows.
   - Remove any remaining `// @ts-check` or TS references.

## Order of work

1. Create this plan (done).
2. Convert one small module (e.g. `src/lib/config.ts` → `config.js`) and adjust imports; confirm build.
3. Convert `src/lib` .ts files to .js; then routes; then remaining.
4. Strip TS from package.json and configs; remove tsconfig or replace with jsconfig.
5. Update AGENTS.md / README if they mention TypeScript or `pnpm check`/svelte-check.

## Notes

- No runtime types in JS; rely on validation at boundaries if needed (e.g. parse functions that throw on bad data).
- JSDoc can still provide editor hints and basic type checking if `// @ts-check` is used in selected files later; not required for the port.
